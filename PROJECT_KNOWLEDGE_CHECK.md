# MightyBloom: Проверка Знания Проекта

Цель этого файла: помочь тебе разобраться в текущем проекте не поверхностно, а по-настоящему понять:

- как устроена структура Next.js (App Router),
- как данные живут в `localStorage`,
- как работает логика экранов,
- как связаны типы, утилиты и UI-компоненты.

Когда ответишь на вопросы, отправь мне ответы (можно частями), и я:

- проверю по текущему коду проекта,
- укажу пробелы,
- дам оценку по уровням (ориентировочно: `Junior- / Junior / Junior+ / Middle-`),
- дам рекомендации, что учить дальше именно под твой уровень.

## Как отвечать (рекомендуемый формат)

Можно прямо копировать вопросы и писать ответы под ними.

Пример:

```md
1. Ответ: ...
2. Ответ: ...
```

Лучше отвечать своими словами. Если где-то не уверен(а), так и пиши: `не уверен(а), думаю что...`.

## Как я буду оценивать

- `0` баллов: ответа нет / ответ не по делу
- `1` балл: частично верно, но есть важные ошибки
- `2` балла: в целом верно, но без понимания деталей
- `3` балла: верно и по делу, с пониманием причин/trade-offs

Итог я буду смотреть не только по сумме, но и по качеству объяснений.

## Блок 1. Каркас проекта (обязательно)

1. Зачем в проекте используется `src/` и какие основные папки в нём есть?
2. Какие страницы сейчас есть в `src/app/` и за что каждая отвечает?
3. Что делает `src/app/layout.tsx` и почему навигация лежит именно там?
4. Чем `page.tsx` в Next.js App Router отличается от обычного React-компонента?
5. Почему многие экраны начинаются с `"use client"`? Что сломается, если убрать это там, где используется `useState`/`useEffect`?
6. Как в проекте задаётся название вкладки браузера и favicon? В каких файлах это сейчас настроено?

## Блок 2. Типы и доменная модель (обязательно)

7. Что хранится в `AppState` (`src/types/app.types.ts`) и почему это центральный тип проекта?
8. Чем отличаются `metricsByDate`, `foodLogByDate`, `choreLogByDate`, `workoutLogByDate`, `stickersByDate`?
9. Почему ключи в логах сделаны строками формата `YYYY-MM-DD`, а не `Date`-объектами?
10. Что означает `version: 1` в `AppState` и зачем это полезно для будущих миграций?
11. Как устроен тип `Chore["schedule"]` и почему это union (`weekly` | `none`)?
12. Что добавляют поля `monthTrackers` и `monthTrackerLogByDate` по сравнению с базовым MVP?

## Блок 3. localStorage и состояние (обязательно)

13. Что делает `createDefaultAppState()` в `src/lib/storage.ts` и почему нельзя просто возвращать один и тот же объект по ссылке?
14. Зачем в `loadAppState()` есть проверка `typeof window === "undefined"`?
15. Что происходит в `loadAppState()`, если `localStorage` пустой, JSON битый, или версия состояния не `1`?
16. Зачем `loadAppState()` делает merge с `defaultState`, а не просто возвращает `parsed`?
17. Почему в `saveAppState()` ошибки записи в `localStorage` проглатываются (`catch {}`)?
18. Что делает удаление `workDaysByMonth` в `loadAppState()` и что это говорит о прошлом проекта?

## Блок 4. Даты и календарная логика (обязательно)

19. Что делает `formatDateKey()` и где он используется в проекте?
20. Почему в `parseDateKey()` есть дополнительная проверка `getFullYear/getMonth/getDate`, а не только regex?
21. Что делают `getWeekStartDate()` и `getWeekDates()` и почему неделя начинается с понедельника?
22. Зачем в некоторых экранах дата парсится как `${selectedDate}T12:00:00`, а не просто `new Date(selectedDate)`?
23. Что делает `shiftDateKeyByDays()` и где это удобно использовать?

## Блок 5. Логика прогресса дня и геймификация (обязательно)

24. Чем отличаются `getCompletedTrackersCount()` и `getDayProgress()` (`src/lib/dayProgress.ts`)?
25. Почему `dayClosed` считается по `coreClosedCount >= 2`, а не по `closedCount >= 2`?
26. Что делает `recalculateStreaks()` (`src/lib/gamification.ts`) и как считается `bestDays`?
27. Как считается `currentDays` в `recalculateStreaks()` и зачем там `while`-цикл с движением назад по дням?
28. Что делает `getStreakBadge()` и почему массив бейджей отсортирован по `minDays` сверху вниз?

## Блок 6. Экран Today (важный практический блок)

29. Как `TodayScreen` инициализирует `appState`, и почему используется lazy initialization в `useState(() => ...)`?
30. Зачем в `TodayScreen` есть `todayKey = useMemo(() => formatDateKey(today), [today])`, а не просто вызов функции в JSX?
31. Что делает `parseNumericInput()` и какие значения она отбрасывает?
32. Как работает `updateTodayMetrics()` и почему внутри него сравниваются `previousProgress` и `nextProgress`?
33. Зачем `withTodayStickerByTrackers()` вызывается до пересчёта стриков?
34. Почему `setAppState` в `TodayScreen` часто вызывается в функциональном виде `setAppState((prev) => ...)`?
35. Как работает `getTodayChoreIds()` и зачем там логика с `startsOn` и `currentWeekStartKey`?
36. Какие потенциальные баги/краевые случаи ты видишь в `TodayScreen`? (Назови хотя бы 2.)

## Блок 7. Остальные экраны (понимание матриц и UI)

37. Какую задачу решает `NutritionScreen` и почему там удобно использовать таблицу по неделе?
38. Что делает `removeFoodFromLog()` и почему это важно при удалении `foodItem`?
39. Как в `NutritionScreen` считается `weeklyCountByFoodId` и для чего он нужен в UI?
40. Какую задачу решает `HomeChoresScreen` и чем он отличается от блока «Дела на сегодня» в `TodayScreen`?
41. Что делает `toSchedule()` в `HomeChoresScreen` и зачем он сортирует/уникализирует дни?
42. Зачем в `HomeChoresScreen` есть `isChorePlannedForDate()` и `getWeekStartKey()`?
43. Как работает `WorkoutsScreen` с `workoutLogByDate`, и почему там хранится один `WorkoutType` на день?
44. Что делает `toggleWorkoutMark()` и почему там сначала копируется `workoutLogByDate`?
45. В чём идея `MonthScreen`: почему календарь сделан круговым, и какие данные на нём визуализируются?

## Блок 8. Компоненты UI и стили (важно для фронтенда)

46. Зачем в проекте есть общие компоненты `Button`, `Card`, `Container`, `Input`?
47. Какие плюсы и минусы подхода “Tailwind-классы прямо в JSX” для этого MVP?
48. Что дают CSS-классы вроде `.surface-card`, `.paper-grid`, `.sparkle-girl` в `src/app/globals.css`?
49. Почему в `MainNav` меню сделано как клиентский компонент с `usePathname()`?
50. Какие улучшения по UX/доступности ты бы добавил в бургер-меню (`Esc`, клик вне, trap focus и т.д.)?

## Блок 9. Архитектура и качество кода (уровень выше)

51. Какие места в проекте сейчас дублируются (например, `createChoreId`, сохранение `saveAppState` в `useEffect`, парсинг дат)?
52. Что можно вынести в `hooks` или `lib`, не переусложняя MVP?
53. Где в проекте есть риск проблем с производительностью, а где `useMemo`/`useState(() => ...)` уже применены уместно?
54. Какие части логики уже готовы к будущей миграции на backend/Supabase, а какие придётся менять сильнее?
55. Если завтра добавлять тесты, с каких функций ты бы начал(а) и почему? (Назови 3–5 функций.)

## Блок 10. Практика (самый полезный)

Ответь коротко, как бы ты реализовал(а) это в текущей архитектуре:

56. Закрытие бургер-меню по `Esc`.
57. Закрытие бургер-меню по клику вне меню.
58. Настройку целей (вода/сон/шаги) на отдельном экране.
59. Простую миграцию `AppState` с `version: 1` на `version: 2`.
60. Автоматический импорт/экспорт состояния в JSON-файл.

## Самооценка (перед отправкой мне)

Ответь себе на 3 вопроса:

1. Какие темы я понял(а) хорошо?
2. Где я отвечал(а) на уровне “угадываю”?
3. Какие 3 темы мне нужно подтянуть в первую очередь?

## Как лучше отправлять ответы мне

- Вариант 1: сразу все 60 ответов
- Вариант 2: по блокам (`Блок 1-3`, потом `4-6`, и т.д.) — это даже удобнее для проверки

После проверки я дам:

- разбор ошибок,
- итоговую оценку понимания проекта,
- ориентировочный грейд,
- персональный план роста (что учить дальше в React/Next/TS/архитектуре).
