# TASKS.md

## Правила выполнения
- Идти строго сверху вниз по этапам.
- Каждую задачу закрывать только после локальной проверки (`npm run lint` и ручной smoke-check в `npm run dev`).
- В конце каждого этапа дополнительно прогонять `npm run build`.
- Не добавлять лишние зависимости без необходимости.
- Для UI-решений сверяться с референсами:
- `public/images/photo_2026-02-12_13-42-51.jpg`
- `public/images/photo_2026-02-12_13-42-56.jpg`

## Stage 0 - Foundation
- [x] Создать базовые файлы App Router в `src/app/`:
  - `src/app/layout.tsx`
  - `src/app/page.tsx`
  - `src/app/month/page.tsx`
  - `src/app/nutrition/page.tsx`
  - `src/app/home/page.tsx`
  - `src/app/workouts/page.tsx`
- [x] Создать типы в `src/types/app.types.ts` по `AGENTS.md`.
- [x] Создать `src/lib/storage.ts` (load/save + дефолтное состояние).
- [x] Создать `src/lib/dates.ts` (форматы `YYYY-MM-DD`, `YYYY-MM`, helpers месяца).
- [x] Создать `src/lib/calories.ts` (подсчет калорий за день).
- [x] Добавить общий UI-каркас: контейнер, карточка, кнопка, инпут (`src/components/ui/*`).

## Stage 1 - Today Screen (MVP)
- [ ] Реализовать экран `Today` в `src/app/page.tsx`.
- [ ] Блок метрик дня: вода (мл), сон (часы), шаги (число), тренировка (done/not done).
- [ ] Блок прогресса дня (закрытые разделы/статус дня).
- [ ] Блок дел на сегодня (из weekly-рутину и ручных отметок).
- [ ] Сохранение всех изменений в `localStorage`.
- [ ] Добавить выдачу стикера и мотивирующей фразы при закрытии дня.

## Stage 2 - Month Screen
- [ ] Реализовать `src/app/month/page.tsx` с круговым трекером сна по дням месяца (основной вид).
- [ ] Добавить резервный вид-сетку месяца (для простого редактирования/навигации).
- [ ] Показ индикаторов по дню: сон, стикер, рабочий день.
- [ ] Клик по дню -> редактирование метрик дня (drawer/modal или inline-панель).
- [ ] Добавление/снятие рабочего дня в календаре.
- [ ] Отображение стикеров на днях.

## Stage 3 - Nutrition Screen
- [ ] Реализовать `src/app/nutrition/page.tsx`.
- [ ] CRUD для `FoodItem` (название, калории, цвет).
- [ ] Таблица/матрица отметок еды по дням недели (как в референсе).
- [ ] Подсчет суммы калорий за выбранный день.
- [ ] Сохранение данных в `foodItems` и `foodLogByDate`.

## Stage 4 - Home Chores Screen
- [ ] Реализовать `src/app/home/page.tsx`.
- [ ] CRUD домашних задач.
- [ ] Weekly-расписание (выбор дней недели для задачи).
- [ ] Weekly-матрица отметок выполнения по дням недели.
- [ ] Отметки выполнения по датам (`choreLogByDate`) с синхронизацией в матрицу.
- [ ] Показывать только активные задачи.

## Stage 5 - Workouts Screen (по эскизу)
- [ ] Добавить `src/app/workouts/page.tsx`.
- [ ] Показ месяца блоками по неделям (даты + день недели).
- [ ] Для дня: выбор/ввод типа тренировки (зал/все тело/ноги/кардио/отдых).
- [ ] Сохранение тренировок в `localStorage`.

## Stage 6 - Gamification Lite
- [ ] Добавить подсчет стриков (текущий и лучший).
- [ ] Добавить минимальные уровни/бейджи (без сложной логики).
- [ ] Привязать мотивирующие фразы к событиям (вода/сон/день закрыт).

## Stage 7 - UI/UX Polish
- [ ] Привести все экраны к единому розовому стилю (карточки, отступы, типографика).
- [ ] Проверить mobile-first адаптацию и desktop.
- [ ] Добавить легкие анимации без перегруза.
- [ ] Проверить доступность: читаемость, фокус, размеры tap-областей.

## Stage 8 - Quality Gate
- [ ] Прогнать `npm run lint`.
- [ ] Прогнать `npm run build`.
- [ ] Ручной smoke-test всех экранов и сценариев сохранения/перезагрузки.
- [ ] Проверить, что измененные файлы соответствуют `AGENTS.md` и DoD.

## Backlog (не делать без запроса)
- [ ] Синхронизация между устройствами.
- [ ] Бэкенд/авторизация/БД.
- [ ] Экспорт PDF/CSV.
- [ ] Продвинутая геймификация.
